(this["webpackJsonpra-router-crud"]=this["webpackJsonpra-router-crud"]||[]).push([[0],{31:function(t,e,n){},32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},40:function(t,e,n){},42:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),s=n(22),a=n.n(s),o=(n(31),n(32),n(6)),u=n(3),i=(n(33),n(34),n(1));function j(){return Object(i.jsx)(o.b,{to:"./posts/new",className:"new-post-button__link",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})}function d(){return Object(i.jsx)("div",{className:"new-post-button",children:Object(i.jsx)(j,{})})}var p=n(12),b=(n(40),n(4)),f=n.n(b),l=n(7),h=(n(42),n(15)),x=n(16),O=Object(c.createContext)([]),v=n(24),m=n(25),w=function(){function t(){Object(v.a)(this,t),this.url="http://localhost:7070"}return Object(m.a)(t,[{key:"read",value:function(){var t=Object(l.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(this.url,"/posts"));case 3:return this.response=t.sent,t.next=6,this.response.json();case 6:return this.result=t.sent,t.abrupt("return",this.result);case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"addMessage",value:function(){var t=Object(l.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch("".concat(this.url,"/posts"),{method:"POST",body:JSON.stringify({id:e,content:n})});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"deleteMessage",value:function(){var t=Object(l.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(this.url,"/posts/").concat(e),{method:"DELETE",body:JSON.stringify({id:e})});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()},{key:"updateMessage",value:function(){var t=Object(l.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==n){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,fetch("".concat(this.url,"/posts"),{method:"POST",body:JSON.stringify({id:e,content:n})});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[2,7]])})));return function(e,n){return t.apply(this,arguments)}}()}]),t}();n(46);function _(){var t=Object(u.f)();return Object(i.jsx)("button",{className:"return-button",type:"button",onClick:function(){t.goBack()},children:Object(i.jsx)(h.a,{icon:x.b,size:"2x"})})}var k=new w;function g(t){var e=Object(c.useRef)(),n=t.match,s=Object(c.useContext)(O).data.posts,a=Object(c.useContext)(O).fetchPosts,u=!!n&&s.find((function(t){return t.id===+n.params.id})),j=function(){var t=Object(l.a)(f.a.mark((function t(e,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.updateMessage(e,n);case 2:return t.next=4,a();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{className:"post",children:[Object(i.jsxs)("header",{className:"post__header",children:[Object(i.jsxs)("div",{className:"post__data",children:[Object(i.jsx)(h.a,{icon:x.a,size:"4x"}),Object(i.jsx)("div",{className:"post__username",children:"\u0412\u043e\u043b\u043e\u0434\u044c\u043a\u0430"}),Object(i.jsx)("div",{className:"post__created",children:t.created||u.created})]}),t.children,n?Object(i.jsx)(_,{}):null]}),n?Object(i.jsxs)(r.a.Fragment,{children:[Object(i.jsx)("input",{ref:e,className:"post__content",defaultValue:u.content}),Object(i.jsx)("button",{onClick:function(){return j(u.id,e.current.value)},className:"post__save",children:Object(i.jsx)(o.b,{to:"../../",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}):Object(i.jsx)("div",{className:"post__content",children:t.content})]})}function N(){var t=Object(c.useContext)(O).data.posts;return Object(i.jsx)("div",{className:"posts",children:t.map((function(t){return Object(i.jsx)(o.b,{to:"/posts/".concat(t.id),children:Object(i.jsx)(g,Object(p.a)({},t))},t.id)}))})}function y(){return Object(i.jsxs)("div",{className:"homepage",children:[Object(i.jsx)(d,{}),Object(i.jsx)(N,{})]})}n(47),n(48);var C=new w;function M(){var t=Object(c.useContext)(O).fetchPosts,e=Object(c.useContext)(O).data.nextId,n=Object(c.useRef)(),r=function(){var c=Object(l.a)(f.a.mark((function c(){return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,C.addMessage(e,n.current.value);case 2:return c.next=4,t();case 4:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();return Object(i.jsxs)("form",{action:"",className:"form",children:[Object(i.jsx)("input",{ref:n,type:"text",name:"newMessage",id:"newMessage"}),Object(i.jsx)(o.b,{className:"form__link",to:"../",onClick:function(){return r()},children:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"})]})}function P(){return Object(i.jsxs)("div",{className:"new-post-window",children:[Object(i.jsx)(_,{}),Object(i.jsx)(M,{})]})}n(49);var S=new w;function I(t){var e=t.match,n=Object(c.useContext)(O).data.posts,r=Object(c.useContext)(O).fetchPosts,s=n.find((function(t){return t.id===+e.params.id})),a=function(){var t=Object(l.a)(f.a.mark((function t(e){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.deleteMessage(e);case 2:return t.next=4,r();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(i.jsxs)("div",{children:[Object(i.jsx)(g,Object(p.a)(Object(p.a)({},s),{},{children:Object(i.jsx)(_,{})})),Object(i.jsxs)("div",{className:"post__buttons",children:[Object(i.jsx)(o.b,{to:"../edit/".concat(s.id),className:"post__button post__button_edit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(i.jsx)(o.b,{to:"../../",onClick:function(){return a(s.id)},className:"post__button post__button_delete",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}var E=n(26),F=new w;var J=function(t){var e=Object(c.useState)({posts:[],nextId:0}),n=Object(E.a)(e,2),r=n[0],s=n[1],a=function(){var t=Object(l.a)(f.a.mark((function t(){var e;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.read();case 2:e=t.sent,s((function(){return{posts:e,nextId:r.nextId++}}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){a()}),[]),Object(i.jsx)(O.Provider,{value:{data:r,fetchPosts:a},children:t.children})};function T(){return Object(i.jsx)(J,{children:Object(i.jsx)(o.a,{children:Object(i.jsx)("div",{className:"app",children:Object(i.jsxs)(u.c,{children:[Object(i.jsx)(u.a,{path:"/posts/new",exact:!0,component:P}),Object(i.jsx)(u.a,{path:"/edit/:id",exact:!0,component:g}),Object(i.jsx)(u.a,{path:"/posts/:id",exact:!0,component:I}),Object(i.jsx)(u.a,{path:"/",exact:!0,component:y})]})})})})}var B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),s(t),a(t)}))};a.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(T,{})}),document.getElementById("root")),B()}},[[50,1,2]]]);
//# sourceMappingURL=main.ebe86268.chunk.js.map